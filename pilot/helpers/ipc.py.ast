Module(body=[Import(names=[alias(name='socket')]), Import(names=[alias(name='json')]), Import(names=[alias(name='time')]), ImportFrom(module='utils.utils', names=[alias(name='json_serial')], level=0), ClassDef(name='IPCClient', bases=[], keywords=[], body=[FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='port')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='ready', ctx=Store())], value=Constant(value=False)), Assign(targets=[Name(id='client', ctx=Store())], value=Call(func=Attribute(value=Name(id='socket', ctx=Load()), attr='socket', ctx=Load()), args=[Attribute(value=Name(id='socket', ctx=Load()), attr='AF_INET', ctx=Load()), Attribute(value=Name(id='socket', ctx=Load()), attr='SOCK_STREAM', ctx=Load())], keywords=[])), Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Constant(value='Connecting to the external process...')], keywords=[])), Try(body=[Expr(value=Call(func=Attribute(value=Name(id='client', ctx=Load()), attr='connect', ctx=Load()), args=[Tuple(elts=[Constant(value='localhost'), Call(func=Name(id='int', ctx=Load()), args=[Name(id='port', ctx=Load())], keywords=[])], ctx=Load())], keywords=[])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='client', ctx=Store())], value=Name(id='client', ctx=Load())), Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Constant(value='Connected!')], keywords=[]))], handlers=[ExceptHandler(type=Name(id='ConnectionRefusedError', ctx=Load()), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='client', ctx=Store())], value=Constant(value=None)), Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Constant(value='Connection refused, make sure you started the external process')], keywords=[]))])], orelse=[], finalbody=[])], decorator_list=[]), FunctionDef(name='handle_request', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='message_content')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Call(func=Name(id='print', ctx=Load()), args=[JoinedStr(values=[Constant(value='Received request from the external process: '), FormattedValue(value=Name(id='message_content', ctx=Load()), conversion=-1)])], keywords=[])), Return(value=Name(id='message_content', ctx=Load()))], decorator_list=[]), FunctionDef(name='listen', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=Compare(left=Attribute(value=Name(id='self', ctx=Load()), attr='client', ctx=Load()), ops=[Is()], comparators=[Constant(value=None)]), body=[Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Constant(value='Not connected to the external process!')], keywords=[])), Return()], orelse=[]), While(test=Constant(value=True), body=[Assign(targets=[Name(id='data', ctx=Store())], value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='client', ctx=Load()), attr='recv', ctx=Load()), args=[Constant(value=4096)], keywords=[])), Assign(targets=[Name(id='message', ctx=Store())], value=Call(func=Attribute(value=Name(id='json', ctx=Load()), attr='loads', ctx=Load()), args=[Name(id='data', ctx=Load())], keywords=[])), If(test=Compare(left=Subscript(value=Name(id='message', ctx=Load()), slice=Constant(value='type'), ctx=Load()), ops=[Eq()], comparators=[Constant(value='response')]), body=[Return(value=Subscript(value=Name(id='message', ctx=Load()), slice=Constant(value='content'), ctx=Load()))], orelse=[])], orelse=[])], decorator_list=[]), FunctionDef(name='send', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='data')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='serialized_data', ctx=Store())], value=Call(func=Attribute(value=Name(id='json', ctx=Load()), attr='dumps', ctx=Load()), args=[Name(id='data', ctx=Load())], keywords=[keyword(arg='default', value=Name(id='json_serial', ctx=Load()))])), Assign(targets=[Name(id='data_length', ctx=Store())], value=Call(func=Name(id='len', ctx=Load()), args=[Name(id='serialized_data', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='client', ctx=Load()), attr='sendall', ctx=Load()), args=[Call(func=Attribute(value=Name(id='data_length', ctx=Load()), attr='to_bytes', ctx=Load()), args=[Constant(value=4)], keywords=[keyword(arg='byteorder', value=Constant(value='big'))])], keywords=[])), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='client', ctx=Load()), attr='sendall', ctx=Load()), args=[Call(func=Attribute(value=Name(id='serialized_data', ctx=Load()), attr='encode', ctx=Load()), args=[Constant(value='utf-8')], keywords=[])], keywords=[]))], decorator_list=[])], decorator_list=[])], type_ignores=[])