Module(body=[ImportFrom(module='distutils.util', names=[alias(name='convert_path')], level=0), ImportFrom(module='distutils', names=[alias(name='log')], level=0), ImportFrom(module='distutils.errors', names=[alias(name='DistutilsOptionError')], level=0), Import(names=[alias(name='os')]), Import(names=[alias(name='glob')]), Import(names=[alias(name='io')]), ImportFrom(module='setuptools.command.easy_install', names=[alias(name='easy_install')], level=0), ImportFrom(module='setuptools', names=[alias(name='_path')], level=0), ImportFrom(module='setuptools', names=[alias(name='namespaces')], level=0), Import(names=[alias(name='setuptools')]), ClassDef(name='develop', bases=[Attribute(value=Name(id='namespaces', ctx=Load()), attr='DevelopInstaller', ctx=Load()), Name(id='easy_install', ctx=Load())], keywords=[], body=[Expr(value=Constant(value='Set up package for development')), Assign(targets=[Name(id='description', ctx=Store())], value=Constant(value="install package in 'development mode'")), Assign(targets=[Name(id='user_options', ctx=Store())], value=BinOp(left=Attribute(value=Name(id='easy_install', ctx=Load()), attr='user_options', ctx=Load()), op=Add(), right=List(elts=[Tuple(elts=[Constant(value='uninstall'), Constant(value='u'), Constant(value='Uninstall this source package')], ctx=Load()), Tuple(elts=[Constant(value='egg-path='), Constant(value=None), Constant(value='Set the path to be used in the .egg-link file')], ctx=Load())], ctx=Load()))), Assign(targets=[Name(id='boolean_options', ctx=Store())], value=BinOp(left=Attribute(value=Name(id='easy_install', ctx=Load()), attr='boolean_options', ctx=Load()), op=Add(), right=List(elts=[Constant(value='uninstall')], ctx=Load()))), Assign(targets=[Name(id='command_consumes_arguments', ctx=Store())], value=Constant(value=False)), FunctionDef(name='run', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=Attribute(value=Name(id='self', ctx=Load()), attr='uninstall', ctx=Load()), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='multi_version', ctx=Store())], value=Constant(value=True)), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='uninstall_link', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='uninstall_namespaces', ctx=Load()), args=[], keywords=[]))], orelse=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='install_for_development', ctx=Load()), args=[], keywords=[]))]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='warn_deprecated_options', ctx=Load()), args=[], keywords=[]))], decorator_list=[]), FunctionDef(name='initialize_options', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='uninstall', ctx=Store())], value=Constant(value=None)), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Store())], value=Constant(value=None)), Expr(value=Call(func=Attribute(value=Name(id='easy_install', ctx=Load()), attr='initialize_options', ctx=Load()), args=[Name(id='self', ctx=Load())], keywords=[])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='setup_path', ctx=Store())], value=Constant(value=None)), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='always_copy_from', ctx=Store())], value=Constant(value='.'))], decorator_list=[]), FunctionDef(name='finalize_options', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Import(names=[alias(name='pkg_resources')]), Assign(targets=[Name(id='ei', ctx=Store())], value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='get_finalized_command', ctx=Load()), args=[Constant(value='egg_info')], keywords=[])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='args', ctx=Store())], value=List(elts=[Attribute(value=Name(id='ei', ctx=Load()), attr='egg_name', ctx=Load())], ctx=Load())), Expr(value=Call(func=Attribute(value=Name(id='easy_install', ctx=Load()), attr='finalize_options', ctx=Load()), args=[Name(id='self', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='expand_basedirs', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='expand_dirs', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='package_index', ctx=Load()), attr='scan', ctx=Load()), args=[Call(func=Attribute(value=Name(id='glob', ctx=Load()), attr='glob', ctx=Load()), args=[Constant(value='*.egg')], keywords=[])], keywords=[])), Assign(targets=[Name(id='egg_link_fn', ctx=Store())], value=BinOp(left=Attribute(value=Name(id='ei', ctx=Load()), attr='egg_name', ctx=Load()), op=Add(), right=Constant(value='.egg-link'))), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_link', ctx=Store())], value=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='join', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='install_dir', ctx=Load()), Name(id='egg_link_fn', ctx=Load())], keywords=[])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_base', ctx=Store())], value=Attribute(value=Name(id='ei', ctx=Load()), attr='egg_base', ctx=Load())), If(test=Compare(left=Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Load()), ops=[Is()], comparators=[Constant(value=None)]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Store())], value=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='abspath', ctx=Load()), args=[Attribute(value=Name(id='ei', ctx=Load()), attr='egg_base', ctx=Load())], keywords=[]))], orelse=[]), Assign(targets=[Name(id='target', ctx=Store())], value=Call(func=Attribute(value=Name(id='_path', ctx=Load()), attr='normpath', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_base', ctx=Load())], keywords=[])), Assign(targets=[Name(id='egg_path', ctx=Store())], value=Call(func=Attribute(value=Name(id='_path', ctx=Load()), attr='normpath', ctx=Load()), args=[Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='join', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='install_dir', ctx=Load()), Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Load())], keywords=[])], keywords=[])), If(test=Compare(left=Name(id='egg_path', ctx=Load()), ops=[NotEq()], comparators=[Name(id='target', ctx=Load())]), body=[Raise(exc=Call(func=Name(id='DistutilsOptionError', ctx=Load()), args=[BinOp(left=Constant(value='--egg-path must be a relative path from the install directory to '), op=Add(), right=Name(id='target', ctx=Load()))], keywords=[]))], orelse=[]), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='dist', ctx=Store())], value=Call(func=Attribute(value=Name(id='pkg_resources', ctx=Load()), attr='Distribution', ctx=Load()), args=[Name(id='target', ctx=Load()), Call(func=Attribute(value=Name(id='pkg_resources', ctx=Load()), attr='PathMetadata', ctx=Load()), args=[Name(id='target', ctx=Load()), Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='abspath', ctx=Load()), args=[Attribute(value=Name(id='ei', ctx=Load()), attr='egg_info', ctx=Load())], keywords=[])], keywords=[])], keywords=[keyword(arg='project_name', value=Attribute(value=Name(id='ei', ctx=Load()), attr='egg_name', ctx=Load()))])), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='setup_path', ctx=Store())], value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='_resolve_setup_path', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_base', ctx=Load()), Attribute(value=Name(id='self', ctx=Load()), attr='install_dir', ctx=Load()), Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Load())], keywords=[]))], decorator_list=[]), FunctionDef(name='_resolve_setup_path', args=arguments(posonlyargs=[], args=[arg(arg='egg_base'), arg(arg='install_dir'), arg(arg='egg_path')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Constant(value="\n        Generate a path from egg_base back to '.' where the\n        setup script resides and ensure that path points to the\n        setup path from $install_dir/$egg_path.\n        ")), Assign(targets=[Name(id='path_to_setup', ctx=Store())], value=Call(func=Attribute(value=Call(func=Attribute(value=Name(id='egg_base', ctx=Load()), attr='replace', ctx=Load()), args=[Attribute(value=Name(id='os', ctx=Load()), attr='sep', ctx=Load()), Constant(value='/')], keywords=[]), attr='rstrip', ctx=Load()), args=[Constant(value='/')], keywords=[])), If(test=Compare(left=Name(id='path_to_setup', ctx=Load()), ops=[NotEq()], comparators=[Attribute(value=Name(id='os', ctx=Load()), attr='curdir', ctx=Load())]), body=[Assign(targets=[Name(id='path_to_setup', ctx=Store())], value=BinOp(left=Constant(value='../'), op=Mult(), right=BinOp(left=Call(func=Attribute(value=Name(id='path_to_setup', ctx=Load()), attr='count', ctx=Load()), args=[Constant(value='/')], keywords=[]), op=Add(), right=Constant(value=1))))], orelse=[]), Assign(targets=[Name(id='resolved', ctx=Store())], value=Call(func=Attribute(value=Name(id='_path', ctx=Load()), attr='normpath', ctx=Load()), args=[Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='join', ctx=Load()), args=[Name(id='install_dir', ctx=Load()), Name(id='egg_path', ctx=Load()), Name(id='path_to_setup', ctx=Load())], keywords=[])], keywords=[])), Assign(targets=[Name(id='curdir', ctx=Store())], value=Call(func=Attribute(value=Name(id='_path', ctx=Load()), attr='normpath', ctx=Load()), args=[Attribute(value=Name(id='os', ctx=Load()), attr='curdir', ctx=Load())], keywords=[])), If(test=Compare(left=Name(id='resolved', ctx=Load()), ops=[NotEq()], comparators=[Name(id='curdir', ctx=Load())]), body=[Raise(exc=Call(func=Name(id='DistutilsOptionError', ctx=Load()), args=[Constant(value="Can't get a consistent path to setup script from installation directory"), Name(id='resolved', ctx=Load()), Name(id='curdir', ctx=Load())], keywords=[]))], orelse=[]), Return(value=Name(id='path_to_setup', ctx=Load()))], decorator_list=[Name(id='staticmethod', ctx=Load())]), FunctionDef(name='install_for_development', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='run_command', ctx=Load()), args=[Constant(value='egg_info')], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='reinitialize_command', ctx=Load()), args=[Constant(value='build_ext')], keywords=[keyword(arg='inplace', value=Constant(value=1))])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='run_command', ctx=Load()), args=[Constant(value='build_ext')], keywords=[])), If(test=Attribute(value=Name(id='setuptools', ctx=Load()), attr='bootstrap_install_from', ctx=Load()), body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='easy_install', ctx=Load()), args=[Attribute(value=Name(id='setuptools', ctx=Load()), attr='bootstrap_install_from', ctx=Load())], keywords=[])), Assign(targets=[Attribute(value=Name(id='setuptools', ctx=Load()), attr='bootstrap_install_from', ctx=Store())], value=Constant(value=None))], orelse=[]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='install_namespaces', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='log', ctx=Load()), attr='info', ctx=Load()), args=[Constant(value='Creating %s (link to %s)'), Attribute(value=Name(id='self', ctx=Load()), attr='egg_link', ctx=Load()), Attribute(value=Name(id='self', ctx=Load()), attr='egg_base', ctx=Load())], keywords=[])), If(test=UnaryOp(op=Not(), operand=Attribute(value=Name(id='self', ctx=Load()), attr='dry_run', ctx=Load())), body=[With(items=[withitem(context_expr=Call(func=Name(id='open', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_link', ctx=Load()), Constant(value='w')], keywords=[]), optional_vars=Name(id='f', ctx=Store()))], body=[Expr(value=Call(func=Attribute(value=Name(id='f', ctx=Load()), attr='write', ctx=Load()), args=[BinOp(left=BinOp(left=Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Load()), op=Add(), right=Constant(value='\n')), op=Add(), right=Attribute(value=Name(id='self', ctx=Load()), attr='setup_path', ctx=Load()))], keywords=[]))])], orelse=[]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='process_distribution', ctx=Load()), args=[Constant(value=None), Attribute(value=Name(id='self', ctx=Load()), attr='dist', ctx=Load()), UnaryOp(op=Not(), operand=Attribute(value=Name(id='self', ctx=Load()), attr='no_deps', ctx=Load()))], keywords=[]))], decorator_list=[]), FunctionDef(name='uninstall_link', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='exists', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_link', ctx=Load())], keywords=[]), body=[Expr(value=Call(func=Attribute(value=Name(id='log', ctx=Load()), attr='info', ctx=Load()), args=[Constant(value='Removing %s (link to %s)'), Attribute(value=Name(id='self', ctx=Load()), attr='egg_link', ctx=Load()), Attribute(value=Name(id='self', ctx=Load()), attr='egg_base', ctx=Load())], keywords=[])), Assign(targets=[Name(id='egg_link_file', ctx=Store())], value=Call(func=Name(id='open', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_link', ctx=Load())], keywords=[])), Assign(targets=[Name(id='contents', ctx=Store())], value=ListComp(elt=Call(func=Attribute(value=Name(id='line', ctx=Load()), attr='rstrip', ctx=Load()), args=[], keywords=[]), generators=[comprehension(target=Name(id='line', ctx=Store()), iter=Name(id='egg_link_file', ctx=Load()), ifs=[], is_async=0)])), Expr(value=Call(func=Attribute(value=Name(id='egg_link_file', ctx=Load()), attr='close', ctx=Load()), args=[], keywords=[])), If(test=Compare(left=Name(id='contents', ctx=Load()), ops=[NotIn()], comparators=[Tuple(elts=[List(elts=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Load())], ctx=Load()), List(elts=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_path', ctx=Load()), Attribute(value=Name(id='self', ctx=Load()), attr='setup_path', ctx=Load())], ctx=Load())], ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='log', ctx=Load()), attr='warn', ctx=Load()), args=[Constant(value='Link points to %s: uninstall aborted'), Name(id='contents', ctx=Load())], keywords=[])), Return()], orelse=[]), If(test=UnaryOp(op=Not(), operand=Attribute(value=Name(id='self', ctx=Load()), attr='dry_run', ctx=Load())), body=[Expr(value=Call(func=Attribute(value=Name(id='os', ctx=Load()), attr='unlink', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='egg_link', ctx=Load())], keywords=[]))], orelse=[])], orelse=[]), If(test=UnaryOp(op=Not(), operand=Attribute(value=Name(id='self', ctx=Load()), attr='dry_run', ctx=Load())), body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='update_pth', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='dist', ctx=Load())], keywords=[]))], orelse=[]), If(test=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='distribution', ctx=Load()), attr='scripts', ctx=Load()), body=[Expr(value=Call(func=Attribute(value=Name(id='log', ctx=Load()), attr='warn', ctx=Load()), args=[Constant(value='Note: you must uninstall or replace scripts manually!')], keywords=[]))], orelse=[])], decorator_list=[]), FunctionDef(name='install_egg_scripts', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='dist')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=Compare(left=Name(id='dist', ctx=Load()), ops=[IsNot()], comparators=[Attribute(value=Name(id='self', ctx=Load()), attr='dist', ctx=Load())]), body=[Return(value=Call(func=Attribute(value=Name(id='easy_install', ctx=Load()), attr='install_egg_scripts', ctx=Load()), args=[Name(id='self', ctx=Load()), Name(id='dist', ctx=Load())], keywords=[]))], orelse=[]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='install_wrapper_scripts', ctx=Load()), args=[Name(id='dist', ctx=Load())], keywords=[])), For(target=Name(id='script_name', ctx=Store()), iter=BoolOp(op=Or(), values=[Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='distribution', ctx=Load()), attr='scripts', ctx=Load()), List(elts=[], ctx=Load())]), body=[Assign(targets=[Name(id='script_path', ctx=Store())], value=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='abspath', ctx=Load()), args=[Call(func=Name(id='convert_path', ctx=Load()), args=[Name(id='script_name', ctx=Load())], keywords=[])], keywords=[])), Assign(targets=[Name(id='script_name', ctx=Store())], value=Call(func=Attribute(value=Attribute(value=Name(id='os', ctx=Load()), attr='path', ctx=Load()), attr='basename', ctx=Load()), args=[Name(id='script_path', ctx=Load())], keywords=[])), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='io', ctx=Load()), attr='open', ctx=Load()), args=[Name(id='script_path', ctx=Load())], keywords=[]), optional_vars=Name(id='strm', ctx=Store()))], body=[Assign(targets=[Name(id='script_text', ctx=Store())], value=Call(func=Attribute(value=Name(id='strm', ctx=Load()), attr='read', ctx=Load()), args=[], keywords=[]))]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='install_script', ctx=Load()), args=[Name(id='dist', ctx=Load()), Name(id='script_name', ctx=Load()), Name(id='script_text', ctx=Load()), Name(id='script_path', ctx=Load())], keywords=[]))], orelse=[])], decorator_list=[]), FunctionDef(name='install_wrapper_scripts', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='dist')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='dist', ctx=Store())], value=Call(func=Name(id='VersionlessRequirement', ctx=Load()), args=[Name(id='dist', ctx=Load())], keywords=[])), Return(value=Call(func=Attribute(value=Name(id='easy_install', ctx=Load()), attr='install_wrapper_scripts', ctx=Load()), args=[Name(id='self', ctx=Load()), Name(id='dist', ctx=Load())], keywords=[]))], decorator_list=[])], decorator_list=[]), ClassDef(name='VersionlessRequirement', bases=[], keywords=[], body=[Expr(value=Constant(value="\n    Adapt a pkg_resources.Distribution to simply return the project\n    name as the 'requirement' so that scripts will work across\n    multiple versions.\n\n    >>> from pkg_resources import Distribution\n    >>> dist = Distribution(project_name='foo', version='1.0')\n    >>> str(dist.as_requirement())\n    'foo==1.0'\n    >>> adapted_dist = VersionlessRequirement(dist)\n    >>> str(adapted_dist.as_requirement())\n    'foo'\n    ")), FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='dist')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__dist', ctx=Store())], value=Name(id='dist', ctx=Load()))], decorator_list=[]), FunctionDef(name='__getattr__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='name')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Call(func=Name(id='getattr', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='__dist', ctx=Load()), Name(id='name', ctx=Load())], keywords=[]))], decorator_list=[]), FunctionDef(name='as_requirement', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Attribute(value=Name(id='self', ctx=Load()), attr='project_name', ctx=Load()))], decorator_list=[])], decorator_list=[])], type_ignores=[])