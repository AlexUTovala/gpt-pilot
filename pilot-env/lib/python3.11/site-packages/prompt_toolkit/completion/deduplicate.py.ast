Module(body=[ImportFrom(module='__future__', names=[alias(name='annotations')], level=0), ImportFrom(module='typing', names=[alias(name='Iterable')], level=0), ImportFrom(module='prompt_toolkit.document', names=[alias(name='Document')], level=0), ImportFrom(module='base', names=[alias(name='CompleteEvent'), alias(name='Completer'), alias(name='Completion')], level=1), Assign(targets=[Name(id='__all__', ctx=Store())], value=List(elts=[Constant(value='DeduplicateCompleter')], ctx=Load())), ClassDef(name='DeduplicateCompleter', bases=[Name(id='Completer', ctx=Load())], keywords=[], body=[Expr(value=Constant(value='\n    Wrapper around a completer that removes duplicates. Only the first unique\n    completions are kept.\n\n    Completions are considered to be a duplicate if they result in the same\n    document text when they would be applied.\n    ')), FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='completer', annotation=Name(id='Completer', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='completer', ctx=Store())], value=Name(id='completer', ctx=Load()))], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='get_completions', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='document', annotation=Name(id='Document', ctx=Load())), arg(arg='complete_event', annotation=Name(id='CompleteEvent', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[AnnAssign(target=Name(id='found_so_far', ctx=Store()), annotation=Subscript(value=Name(id='set', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load()), value=Call(func=Name(id='set', ctx=Load()), args=[], keywords=[]), simple=1), For(target=Name(id='completion', ctx=Store()), iter=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='completer', ctx=Load()), attr='get_completions', ctx=Load()), args=[Name(id='document', ctx=Load()), Name(id='complete_event', ctx=Load())], keywords=[]), body=[Assign(targets=[Name(id='text_if_applied', ctx=Store())], value=BinOp(left=BinOp(left=Subscript(value=Attribute(value=Name(id='document', ctx=Load()), attr='text', ctx=Load()), slice=Slice(upper=BinOp(left=Attribute(value=Name(id='document', ctx=Load()), attr='cursor_position', ctx=Load()), op=Add(), right=Attribute(value=Name(id='completion', ctx=Load()), attr='start_position', ctx=Load()))), ctx=Load()), op=Add(), right=Attribute(value=Name(id='completion', ctx=Load()), attr='text', ctx=Load())), op=Add(), right=Subscript(value=Attribute(value=Name(id='document', ctx=Load()), attr='text', ctx=Load()), slice=Slice(lower=Attribute(value=Name(id='document', ctx=Load()), attr='cursor_position', ctx=Load())), ctx=Load()))), If(test=Compare(left=Name(id='text_if_applied', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='document', ctx=Load()), attr='text', ctx=Load())]), body=[Continue()], orelse=[]), If(test=Compare(left=Name(id='text_if_applied', ctx=Load()), ops=[In()], comparators=[Name(id='found_so_far', ctx=Load())]), body=[Continue()], orelse=[]), Expr(value=Call(func=Attribute(value=Name(id='found_so_far', ctx=Load()), attr='add', ctx=Load()), args=[Name(id='text_if_applied', ctx=Load())], keywords=[])), Expr(value=Yield(value=Name(id='completion', ctx=Load())))], orelse=[])], decorator_list=[], returns=Subscript(value=Name(id='Iterable', ctx=Load()), slice=Name(id='Completion', ctx=Load()), ctx=Load()))], decorator_list=[])], type_ignores=[])