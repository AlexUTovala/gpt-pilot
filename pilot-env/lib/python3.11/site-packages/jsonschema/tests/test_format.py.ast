Module(body=[Expr(value=Constant(value='\nTests for the parts of jsonschema related to the :kw:`format` keyword.\n')), ImportFrom(module='unittest', names=[alias(name='TestCase')], level=0), ImportFrom(module='jsonschema', names=[alias(name='FormatChecker'), alias(name='ValidationError')], level=0), ImportFrom(module='jsonschema.exceptions', names=[alias(name='FormatError')], level=0), ImportFrom(module='jsonschema.validators', names=[alias(name='Draft4Validator')], level=0), Assign(targets=[Name(id='BOOM', ctx=Store())], value=Call(func=Name(id='ValueError', ctx=Load()), args=[Constant(value='Boom!')], keywords=[])), Assign(targets=[Name(id='BANG', ctx=Store())], value=Call(func=Name(id='ZeroDivisionError', ctx=Load()), args=[Constant(value='Bang!')], keywords=[])), FunctionDef(name='boom', args=arguments(posonlyargs=[], args=[arg(arg='thing')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=Compare(left=Name(id='thing', ctx=Load()), ops=[Eq()], comparators=[Constant(value='bang')]), body=[Raise(exc=Name(id='BANG', ctx=Load()))], orelse=[]), Raise(exc=Name(id='BOOM', ctx=Load()))], decorator_list=[]), ClassDef(name='TestFormatChecker', bases=[Name(id='TestCase', ctx=Load())], keywords=[], body=[FunctionDef(name='test_it_can_validate_no_formats', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='checker', ctx=Store())], value=Call(func=Name(id='FormatChecker', ctx=Load()), args=[], keywords=[keyword(arg='formats', value=Tuple(elts=[], ctx=Load()))])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertFalse', ctx=Load()), args=[Attribute(value=Name(id='checker', ctx=Load()), attr='checkers', ctx=Load())], keywords=[]))], decorator_list=[]), FunctionDef(name='test_it_raises_a_key_error_for_unknown_formats', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertRaises', ctx=Load()), args=[Name(id='KeyError', ctx=Load())], keywords=[]))], body=[Expr(value=Call(func=Name(id='FormatChecker', ctx=Load()), args=[], keywords=[keyword(arg='formats', value=List(elts=[Constant(value='o noes')], ctx=Load()))]))])], decorator_list=[]), FunctionDef(name='test_it_can_register_cls_checkers', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='original', ctx=Store())], value=Call(func=Name(id='dict', ctx=Load()), args=[Attribute(value=Name(id='FormatChecker', ctx=Load()), attr='checkers', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='addCleanup', ctx=Load()), args=[Attribute(value=Attribute(value=Name(id='FormatChecker', ctx=Load()), attr='checkers', ctx=Load()), attr='pop', ctx=Load()), Constant(value='boom')], keywords=[])), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertWarns', ctx=Load()), args=[Name(id='DeprecationWarning', ctx=Load())], keywords=[]))], body=[Expr(value=Call(func=Call(func=Attribute(value=Name(id='FormatChecker', ctx=Load()), attr='cls_checks', ctx=Load()), args=[Constant(value='boom')], keywords=[]), args=[Name(id='boom', ctx=Load())], keywords=[]))]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertEqual', ctx=Load()), args=[Attribute(value=Name(id='FormatChecker', ctx=Load()), attr='checkers', ctx=Load()), Call(func=Name(id='dict', ctx=Load()), args=[Name(id='original', ctx=Load())], keywords=[keyword(arg='boom', value=Tuple(elts=[Name(id='boom', ctx=Load()), Tuple(elts=[], ctx=Load())], ctx=Load()))])], keywords=[]))], decorator_list=[]), FunctionDef(name='test_it_can_register_checkers', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='checker', ctx=Store())], value=Call(func=Name(id='FormatChecker', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='checks', ctx=Load()), args=[Constant(value='boom')], keywords=[]), args=[Name(id='boom', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertEqual', ctx=Load()), args=[Attribute(value=Name(id='checker', ctx=Load()), attr='checkers', ctx=Load()), Call(func=Name(id='dict', ctx=Load()), args=[Attribute(value=Name(id='FormatChecker', ctx=Load()), attr='checkers', ctx=Load())], keywords=[keyword(arg='boom', value=Tuple(elts=[Name(id='boom', ctx=Load()), Tuple(elts=[], ctx=Load())], ctx=Load()))])], keywords=[]))], decorator_list=[]), FunctionDef(name='test_it_catches_registered_errors', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='checker', ctx=Store())], value=Call(func=Name(id='FormatChecker', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='checks', ctx=Load()), args=[Constant(value='boom')], keywords=[keyword(arg='raises', value=Call(func=Name(id='type', ctx=Load()), args=[Name(id='BOOM', ctx=Load())], keywords=[]))]), args=[Name(id='boom', ctx=Load())], keywords=[])), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertRaises', ctx=Load()), args=[Name(id='FormatError', ctx=Load())], keywords=[]), optional_vars=Name(id='cm', ctx=Store()))], body=[Expr(value=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='check', ctx=Load()), args=[], keywords=[keyword(arg='instance', value=Constant(value=12)), keyword(arg='format', value=Constant(value='boom'))]))]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertIs', ctx=Load()), args=[Attribute(value=Attribute(value=Name(id='cm', ctx=Load()), attr='exception', ctx=Load()), attr='cause', ctx=Load()), Name(id='BOOM', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertIs', ctx=Load()), args=[Attribute(value=Attribute(value=Name(id='cm', ctx=Load()), attr='exception', ctx=Load()), attr='__cause__', ctx=Load()), Name(id='BOOM', ctx=Load())], keywords=[])), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertRaises', ctx=Load()), args=[Call(func=Name(id='type', ctx=Load()), args=[Name(id='BANG', ctx=Load())], keywords=[])], keywords=[]))], body=[Expr(value=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='check', ctx=Load()), args=[], keywords=[keyword(arg='instance', value=Constant(value='bang')), keyword(arg='format', value=Constant(value='boom'))]))])], decorator_list=[]), FunctionDef(name='test_format_error_causes_become_validation_error_causes', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='checker', ctx=Store())], value=Call(func=Name(id='FormatChecker', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='checks', ctx=Load()), args=[Constant(value='boom')], keywords=[keyword(arg='raises', value=Name(id='ValueError', ctx=Load()))]), args=[Name(id='boom', ctx=Load())], keywords=[])), Assign(targets=[Name(id='validator', ctx=Store())], value=Call(func=Name(id='Draft4Validator', ctx=Load()), args=[Dict(keys=[Constant(value='format')], values=[Constant(value='boom')])], keywords=[keyword(arg='format_checker', value=Name(id='checker', ctx=Load()))])), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertRaises', ctx=Load()), args=[Name(id='ValidationError', ctx=Load())], keywords=[]), optional_vars=Name(id='cm', ctx=Store()))], body=[Expr(value=Call(func=Attribute(value=Name(id='validator', ctx=Load()), attr='validate', ctx=Load()), args=[Constant(value='BOOM')], keywords=[]))]), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertIs', ctx=Load()), args=[Attribute(value=Attribute(value=Name(id='cm', ctx=Load()), attr='exception', ctx=Load()), attr='cause', ctx=Load()), Name(id='BOOM', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertIs', ctx=Load()), args=[Attribute(value=Attribute(value=Name(id='cm', ctx=Load()), attr='exception', ctx=Load()), attr='__cause__', ctx=Load()), Name(id='BOOM', ctx=Load())], keywords=[]))], decorator_list=[]), FunctionDef(name='test_format_checkers_come_with_defaults', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='checker', ctx=Store())], value=Call(func=Name(id='FormatChecker', ctx=Load()), args=[], keywords=[])), With(items=[withitem(context_expr=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertRaises', ctx=Load()), args=[Name(id='FormatError', ctx=Load())], keywords=[]))], body=[Expr(value=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='check', ctx=Load()), args=[], keywords=[keyword(arg='instance', value=Constant(value='not-an-ipv4')), keyword(arg='format', value=Constant(value='ipv4'))]))])], decorator_list=[]), FunctionDef(name='test_repr', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='checker', ctx=Store())], value=Call(func=Name(id='FormatChecker', ctx=Load()), args=[], keywords=[keyword(arg='formats', value=Tuple(elts=[], ctx=Load()))])), Expr(value=Call(func=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='checks', ctx=Load()), args=[Constant(value='foo')], keywords=[]), args=[Lambda(args=arguments(posonlyargs=[], args=[arg(arg='thing')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=Constant(value=True))], keywords=[])), Expr(value=Call(func=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='checks', ctx=Load()), args=[Constant(value='bar')], keywords=[]), args=[Lambda(args=arguments(posonlyargs=[], args=[arg(arg='thing')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=Constant(value=True))], keywords=[])), Expr(value=Call(func=Call(func=Attribute(value=Name(id='checker', ctx=Load()), attr='checks', ctx=Load()), args=[Constant(value='baz')], keywords=[]), args=[Lambda(args=arguments(posonlyargs=[], args=[arg(arg='thing')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=Constant(value=True))], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='assertEqual', ctx=Load()), args=[Call(func=Name(id='repr', ctx=Load()), args=[Name(id='checker', ctx=Load())], keywords=[]), Constant(value="<FormatChecker checkers=['bar', 'baz', 'foo']>")], keywords=[]))], decorator_list=[])], decorator_list=[])], type_ignores=[])