Module(body=[ImportFrom(module='__future__', names=[alias(name='annotations')], level=0), Import(names=[alias(name='logging')]), ImportFrom(module='argparse', names=[alias(name='ArgumentParser')], level=0), ImportFrom(module='typing', names=[alias(name='TYPE_CHECKING')], level=0), ImportFrom(module='pip._vendor', names=[alias(name='requests')], level=0), ImportFrom(module='pip._vendor.cachecontrol.adapter', names=[alias(name='CacheControlAdapter')], level=0), ImportFrom(module='pip._vendor.cachecontrol.cache', names=[alias(name='DictCache')], level=0), ImportFrom(module='pip._vendor.cachecontrol.controller', names=[alias(name='logger')], level=0), If(test=Name(id='TYPE_CHECKING', ctx=Load()), body=[ImportFrom(module='argparse', names=[alias(name='Namespace')], level=0), ImportFrom(module='pip._vendor.cachecontrol.controller', names=[alias(name='CacheController')], level=0)], orelse=[]), FunctionDef(name='setup_logging', args=arguments(posonlyargs=[], args=[], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load()), attr='setLevel', ctx=Load()), args=[Attribute(value=Name(id='logging', ctx=Load()), attr='DEBUG', ctx=Load())], keywords=[])), Assign(targets=[Name(id='handler', ctx=Store())], value=Call(func=Attribute(value=Name(id='logging', ctx=Load()), attr='StreamHandler', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='logger', ctx=Load()), attr='addHandler', ctx=Load()), args=[Name(id='handler', ctx=Load())], keywords=[]))], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='get_session', args=arguments(posonlyargs=[], args=[], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='adapter', ctx=Store())], value=Call(func=Name(id='CacheControlAdapter', ctx=Load()), args=[Call(func=Name(id='DictCache', ctx=Load()), args=[], keywords=[])], keywords=[keyword(arg='cache_etags', value=Constant(value=True)), keyword(arg='serializer', value=Constant(value=None)), keyword(arg='heuristic', value=Constant(value=None))])), Assign(targets=[Name(id='sess', ctx=Store())], value=Call(func=Attribute(value=Name(id='requests', ctx=Load()), attr='Session', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='sess', ctx=Load()), attr='mount', ctx=Load()), args=[Constant(value='http://'), Name(id='adapter', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='sess', ctx=Load()), attr='mount', ctx=Load()), args=[Constant(value='https://'), Name(id='adapter', ctx=Load())], keywords=[])), Assign(targets=[Attribute(value=Name(id='sess', ctx=Load()), attr='cache_controller', ctx=Store())], value=Attribute(value=Name(id='adapter', ctx=Load()), attr='controller', ctx=Load())), Return(value=Name(id='sess', ctx=Load()))], decorator_list=[], returns=Attribute(value=Name(id='requests', ctx=Load()), attr='Session', ctx=Load())), FunctionDef(name='get_args', args=arguments(posonlyargs=[], args=[], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='parser', ctx=Store())], value=Call(func=Name(id='ArgumentParser', ctx=Load()), args=[], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='parser', ctx=Load()), attr='add_argument', ctx=Load()), args=[Constant(value='url')], keywords=[keyword(arg='help', value=Constant(value='The URL to try and cache'))])), Return(value=Call(func=Attribute(value=Name(id='parser', ctx=Load()), attr='parse_args', ctx=Load()), args=[], keywords=[]))], decorator_list=[], returns=Name(id='Namespace', ctx=Load())), FunctionDef(name='main', args=arguments(posonlyargs=[], args=[], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='args', ctx=Store())], value=Call(func=Name(id='get_args', ctx=Load()), args=[], keywords=[])), Assign(targets=[Name(id='sess', ctx=Store())], value=Call(func=Name(id='get_session', ctx=Load()), args=[], keywords=[])), Assign(targets=[Name(id='resp', ctx=Store())], value=Call(func=Attribute(value=Name(id='sess', ctx=Load()), attr='get', ctx=Load()), args=[Attribute(value=Name(id='args', ctx=Load()), attr='url', ctx=Load())], keywords=[])), Expr(value=Call(func=Name(id='setup_logging', ctx=Load()), args=[], keywords=[])), AnnAssign(target=Name(id='cache_controller', ctx=Store()), annotation=Name(id='CacheController', ctx=Load()), value=Attribute(value=Name(id='sess', ctx=Load()), attr='cache_controller', ctx=Load()), simple=1), Expr(value=Call(func=Attribute(value=Name(id='cache_controller', ctx=Load()), attr='cache_response', ctx=Load()), args=[Attribute(value=Name(id='resp', ctx=Load()), attr='request', ctx=Load()), Attribute(value=Name(id='resp', ctx=Load()), attr='raw', ctx=Load())], keywords=[])), If(test=Call(func=Attribute(value=Name(id='cache_controller', ctx=Load()), attr='cached_request', ctx=Load()), args=[Attribute(value=Name(id='resp', ctx=Load()), attr='request', ctx=Load())], keywords=[]), body=[Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Constant(value='Cached!')], keywords=[]))], orelse=[Expr(value=Call(func=Name(id='print', ctx=Load()), args=[Constant(value='Not cached :(')], keywords=[]))])], decorator_list=[], returns=Constant(value=None)), If(test=Compare(left=Name(id='__name__', ctx=Load()), ops=[Eq()], comparators=[Constant(value='__main__')]), body=[Expr(value=Call(func=Name(id='main', ctx=Load()), args=[], keywords=[]))], orelse=[])], type_ignores=[])