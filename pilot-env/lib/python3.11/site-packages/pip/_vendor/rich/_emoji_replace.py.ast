Module(body=[ImportFrom(module='typing', names=[alias(name='Callable'), alias(name='Match'), alias(name='Optional')], level=0), Import(names=[alias(name='re')]), ImportFrom(module='_emoji_codes', names=[alias(name='EMOJI')], level=1), Assign(targets=[Name(id='_ReStringMatch', ctx=Store())], value=Subscript(value=Name(id='Match', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load())), Assign(targets=[Name(id='_ReSubCallable', ctx=Store())], value=Subscript(value=Name(id='Callable', ctx=Load()), slice=Tuple(elts=[List(elts=[Name(id='_ReStringMatch', ctx=Load())], ctx=Load()), Name(id='str', ctx=Load())], ctx=Load()), ctx=Load())), Assign(targets=[Name(id='_EmojiSubMethod', ctx=Store())], value=Subscript(value=Name(id='Callable', ctx=Load()), slice=Tuple(elts=[List(elts=[Name(id='_ReSubCallable', ctx=Load()), Name(id='str', ctx=Load())], ctx=Load()), Name(id='str', ctx=Load())], ctx=Load()), ctx=Load())), FunctionDef(name='_emoji_replace', args=arguments(posonlyargs=[], args=[arg(arg='text', annotation=Name(id='str', ctx=Load())), arg(arg='default_variant', annotation=Subscript(value=Name(id='Optional', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load())), arg(arg='_emoji_sub', annotation=Name(id='_EmojiSubMethod', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[Constant(value=None), Attribute(value=Call(func=Attribute(value=Name(id='re', ctx=Load()), attr='compile', ctx=Load()), args=[Constant(value='(:(\\S*?)(?:(?:\\-)(emoji|text))?:)')], keywords=[]), attr='sub', ctx=Load())]), body=[Expr(value=Constant(value='Replace emoji code in text.')), Assign(targets=[Name(id='get_emoji', ctx=Store())], value=Attribute(value=Name(id='EMOJI', ctx=Load()), attr='__getitem__', ctx=Load())), Assign(targets=[Name(id='variants', ctx=Store())], value=Dict(keys=[Constant(value='text'), Constant(value='emoji')], values=[Constant(value='︎'), Constant(value='️')])), Assign(targets=[Name(id='get_variant', ctx=Store())], value=Attribute(value=Name(id='variants', ctx=Load()), attr='get', ctx=Load())), Assign(targets=[Name(id='default_variant_code', ctx=Store())], value=IfExp(test=Name(id='default_variant', ctx=Load()), body=Call(func=Attribute(value=Name(id='variants', ctx=Load()), attr='get', ctx=Load()), args=[Name(id='default_variant', ctx=Load()), Constant(value='')], keywords=[]), orelse=Constant(value=''))), FunctionDef(name='do_replace', args=arguments(posonlyargs=[], args=[arg(arg='match', annotation=Subscript(value=Name(id='Match', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Tuple(elts=[Name(id='emoji_code', ctx=Store()), Name(id='emoji_name', ctx=Store()), Name(id='variant', ctx=Store())], ctx=Store())], value=Call(func=Attribute(value=Name(id='match', ctx=Load()), attr='groups', ctx=Load()), args=[], keywords=[])), Try(body=[Return(value=BinOp(left=Call(func=Name(id='get_emoji', ctx=Load()), args=[Call(func=Attribute(value=Name(id='emoji_name', ctx=Load()), attr='lower', ctx=Load()), args=[], keywords=[])], keywords=[]), op=Add(), right=Call(func=Name(id='get_variant', ctx=Load()), args=[Name(id='variant', ctx=Load()), Name(id='default_variant_code', ctx=Load())], keywords=[])))], handlers=[ExceptHandler(type=Name(id='KeyError', ctx=Load()), body=[Return(value=Name(id='emoji_code', ctx=Load()))])], orelse=[], finalbody=[])], decorator_list=[], returns=Name(id='str', ctx=Load())), Return(value=Call(func=Name(id='_emoji_sub', ctx=Load()), args=[Name(id='do_replace', ctx=Load()), Name(id='text', ctx=Load())], keywords=[]))], decorator_list=[], returns=Name(id='str', ctx=Load()))], type_ignores=[])