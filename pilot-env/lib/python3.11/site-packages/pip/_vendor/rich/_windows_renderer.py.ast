Module(body=[ImportFrom(module='typing', names=[alias(name='Iterable'), alias(name='Sequence'), alias(name='Tuple'), alias(name='cast')], level=0), ImportFrom(module='pip._vendor.rich._win32_console', names=[alias(name='LegacyWindowsTerm'), alias(name='WindowsCoordinates')], level=0), ImportFrom(module='pip._vendor.rich.segment', names=[alias(name='ControlCode'), alias(name='ControlType'), alias(name='Segment')], level=0), FunctionDef(name='legacy_windows_render', args=arguments(posonlyargs=[], args=[arg(arg='buffer', annotation=Subscript(value=Name(id='Iterable', ctx=Load()), slice=Name(id='Segment', ctx=Load()), ctx=Load())), arg(arg='term', annotation=Name(id='LegacyWindowsTerm', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Constant(value='Makes appropriate Windows Console API calls based on the segments in the buffer.\n\n    Args:\n        buffer (Iterable[Segment]): Iterable of Segments to convert to Win32 API calls.\n        term (LegacyWindowsTerm): Used to call the Windows Console API.\n    ')), For(target=Tuple(elts=[Name(id='text', ctx=Store()), Name(id='style', ctx=Store()), Name(id='control', ctx=Store())], ctx=Store()), iter=Name(id='buffer', ctx=Load()), body=[If(test=UnaryOp(op=Not(), operand=Name(id='control', ctx=Load())), body=[If(test=Name(id='style', ctx=Load()), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='write_styled', ctx=Load()), args=[Name(id='text', ctx=Load()), Name(id='style', ctx=Load())], keywords=[]))], orelse=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='write_text', ctx=Load()), args=[Name(id='text', ctx=Load())], keywords=[]))])], orelse=[AnnAssign(target=Name(id='control_codes', ctx=Store()), annotation=Subscript(value=Name(id='Sequence', ctx=Load()), slice=Name(id='ControlCode', ctx=Load()), ctx=Load()), value=Name(id='control', ctx=Load()), simple=1), For(target=Name(id='control_code', ctx=Store()), iter=Name(id='control_codes', ctx=Load()), body=[Assign(targets=[Name(id='control_type', ctx=Store())], value=Subscript(value=Name(id='control_code', ctx=Load()), slice=Constant(value=0), ctx=Load())), If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='CURSOR_MOVE_TO', ctx=Load())]), body=[Assign(targets=[Tuple(elts=[Name(id='_', ctx=Store()), Name(id='x', ctx=Store()), Name(id='y', ctx=Store())], ctx=Store())], value=Call(func=Name(id='cast', ctx=Load()), args=[Subscript(value=Name(id='Tuple', ctx=Load()), slice=Tuple(elts=[Name(id='ControlType', ctx=Load()), Name(id='int', ctx=Load()), Name(id='int', ctx=Load())], ctx=Load()), ctx=Load()), Name(id='control_code', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='move_cursor_to', ctx=Load()), args=[Call(func=Name(id='WindowsCoordinates', ctx=Load()), args=[], keywords=[keyword(arg='row', value=BinOp(left=Name(id='y', ctx=Load()), op=Sub(), right=Constant(value=1))), keyword(arg='col', value=BinOp(left=Name(id='x', ctx=Load()), op=Sub(), right=Constant(value=1)))])], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='CARRIAGE_RETURN', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='write_text', ctx=Load()), args=[Constant(value='\r')], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='HOME', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='move_cursor_to', ctx=Load()), args=[Call(func=Name(id='WindowsCoordinates', ctx=Load()), args=[Constant(value=0), Constant(value=0)], keywords=[])], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='CURSOR_UP', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='move_cursor_up', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='CURSOR_DOWN', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='move_cursor_down', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='CURSOR_FORWARD', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='move_cursor_forward', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='CURSOR_BACKWARD', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='move_cursor_backward', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='CURSOR_MOVE_TO_COLUMN', ctx=Load())]), body=[Assign(targets=[Tuple(elts=[Name(id='_', ctx=Store()), Name(id='column', ctx=Store())], ctx=Store())], value=Call(func=Name(id='cast', ctx=Load()), args=[Subscript(value=Name(id='Tuple', ctx=Load()), slice=Tuple(elts=[Name(id='ControlType', ctx=Load()), Name(id='int', ctx=Load())], ctx=Load()), ctx=Load()), Name(id='control_code', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='move_cursor_to_column', ctx=Load()), args=[BinOp(left=Name(id='column', ctx=Load()), op=Sub(), right=Constant(value=1))], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='HIDE_CURSOR', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='hide_cursor', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='SHOW_CURSOR', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='show_cursor', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='ERASE_IN_LINE', ctx=Load())]), body=[Assign(targets=[Tuple(elts=[Name(id='_', ctx=Store()), Name(id='mode', ctx=Store())], ctx=Store())], value=Call(func=Name(id='cast', ctx=Load()), args=[Subscript(value=Name(id='Tuple', ctx=Load()), slice=Tuple(elts=[Name(id='ControlType', ctx=Load()), Name(id='int', ctx=Load())], ctx=Load()), ctx=Load()), Name(id='control_code', ctx=Load())], keywords=[])), If(test=Compare(left=Name(id='mode', ctx=Load()), ops=[Eq()], comparators=[Constant(value=0)]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='erase_end_of_line', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='mode', ctx=Load()), ops=[Eq()], comparators=[Constant(value=1)]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='erase_start_of_line', ctx=Load()), args=[], keywords=[]))], orelse=[If(test=Compare(left=Name(id='mode', ctx=Load()), ops=[Eq()], comparators=[Constant(value=2)]), body=[Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='erase_line', ctx=Load()), args=[], keywords=[]))], orelse=[])])])], orelse=[If(test=Compare(left=Name(id='control_type', ctx=Load()), ops=[Eq()], comparators=[Attribute(value=Name(id='ControlType', ctx=Load()), attr='SET_WINDOW_TITLE', ctx=Load())]), body=[Assign(targets=[Tuple(elts=[Name(id='_', ctx=Store()), Name(id='title', ctx=Store())], ctx=Store())], value=Call(func=Name(id='cast', ctx=Load()), args=[Subscript(value=Name(id='Tuple', ctx=Load()), slice=Tuple(elts=[Name(id='ControlType', ctx=Load()), Name(id='str', ctx=Load())], ctx=Load()), ctx=Load()), Name(id='control_code', ctx=Load())], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='term', ctx=Load()), attr='set_title', ctx=Load()), args=[Name(id='title', ctx=Load())], keywords=[]))], orelse=[])])])])])])])])])])])])], orelse=[])])], orelse=[])], decorator_list=[], returns=Constant(value=None))], type_ignores=[])