Module(body=[Import(names=[alias(name='io')]), ImportFrom(module='typing', names=[alias(name='IO'), alias(name='TYPE_CHECKING'), alias(name='Any'), alias(name='List')], level=0), ImportFrom(module='ansi', names=[alias(name='AnsiDecoder')], level=1), ImportFrom(module='text', names=[alias(name='Text')], level=1), If(test=Name(id='TYPE_CHECKING', ctx=Load()), body=[ImportFrom(module='console', names=[alias(name='Console')], level=1)], orelse=[]), ClassDef(name='FileProxy', bases=[Attribute(value=Name(id='io', ctx=Load()), attr='TextIOBase', ctx=Load())], keywords=[], body=[Expr(value=Constant(value='Wraps a file (e.g. sys.stdout) and redirects writes to a console.')), FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='console', annotation=Constant(value='Console')), arg(arg='file', annotation=Subscript(value=Name(id='IO', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__console', ctx=Store())], value=Name(id='console', ctx=Load())), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__file', ctx=Store())], value=Name(id='file', ctx=Load())), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load()), attr='__buffer', ctx=Store()), annotation=Subscript(value=Name(id='List', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load()), value=List(elts=[], ctx=Load()), simple=0), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='__ansi_decoder', ctx=Store())], value=Call(func=Name(id='AnsiDecoder', ctx=Load()), args=[], keywords=[]))], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='rich_proxied_file', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Constant(value='Get proxied file.')), Return(value=Attribute(value=Name(id='self', ctx=Load()), attr='__file', ctx=Load()))], decorator_list=[Name(id='property', ctx=Load())], returns=Subscript(value=Name(id='IO', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load())), FunctionDef(name='__getattr__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='name', annotation=Name(id='str', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Call(func=Name(id='getattr', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='__file', ctx=Load()), Name(id='name', ctx=Load())], keywords=[]))], decorator_list=[], returns=Name(id='Any', ctx=Load())), FunctionDef(name='write', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='text', annotation=Name(id='str', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=UnaryOp(op=Not(), operand=Call(func=Name(id='isinstance', ctx=Load()), args=[Name(id='text', ctx=Load()), Name(id='str', ctx=Load())], keywords=[])), body=[Raise(exc=Call(func=Name(id='TypeError', ctx=Load()), args=[JoinedStr(values=[Constant(value='write() argument must be str, not '), FormattedValue(value=Attribute(value=Call(func=Name(id='type', ctx=Load()), args=[Name(id='text', ctx=Load())], keywords=[]), attr='__name__', ctx=Load()), conversion=-1)])], keywords=[]))], orelse=[]), Assign(targets=[Name(id='buffer', ctx=Store())], value=Attribute(value=Name(id='self', ctx=Load()), attr='__buffer', ctx=Load())), AnnAssign(target=Name(id='lines', ctx=Store()), annotation=Subscript(value=Name(id='List', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load()), value=List(elts=[], ctx=Load()), simple=1), While(test=Name(id='text', ctx=Load()), body=[Assign(targets=[Tuple(elts=[Name(id='line', ctx=Store()), Name(id='new_line', ctx=Store()), Name(id='text', ctx=Store())], ctx=Store())], value=Call(func=Attribute(value=Name(id='text', ctx=Load()), attr='partition', ctx=Load()), args=[Constant(value='\n')], keywords=[])), If(test=Name(id='new_line', ctx=Load()), body=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load()), attr='append', ctx=Load()), args=[BinOp(left=Call(func=Attribute(value=Constant(value=''), attr='join', ctx=Load()), args=[Name(id='buffer', ctx=Load())], keywords=[]), op=Add(), right=Name(id='line', ctx=Load()))], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='buffer', ctx=Load()), attr='clear', ctx=Load()), args=[], keywords=[]))], orelse=[Expr(value=Call(func=Attribute(value=Name(id='buffer', ctx=Load()), attr='append', ctx=Load()), args=[Name(id='line', ctx=Load())], keywords=[])), Break()])], orelse=[]), If(test=Name(id='lines', ctx=Load()), body=[Assign(targets=[Name(id='console', ctx=Store())], value=Attribute(value=Name(id='self', ctx=Load()), attr='__console', ctx=Load())), With(items=[withitem(context_expr=Name(id='console', ctx=Load()))], body=[Assign(targets=[Name(id='output', ctx=Store())], value=Call(func=Attribute(value=Call(func=Name(id='Text', ctx=Load()), args=[Constant(value='\n')], keywords=[]), attr='join', ctx=Load()), args=[GeneratorExp(elt=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='__ansi_decoder', ctx=Load()), attr='decode_line', ctx=Load()), args=[Name(id='line', ctx=Load())], keywords=[]), generators=[comprehension(target=Name(id='line', ctx=Store()), iter=Name(id='lines', ctx=Load()), ifs=[], is_async=0)])], keywords=[])), Expr(value=Call(func=Attribute(value=Name(id='console', ctx=Load()), attr='print', ctx=Load()), args=[Name(id='output', ctx=Load())], keywords=[]))])], orelse=[]), Return(value=Call(func=Name(id='len', ctx=Load()), args=[Name(id='text', ctx=Load())], keywords=[]))], decorator_list=[], returns=Name(id='int', ctx=Load())), FunctionDef(name='flush', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='output', ctx=Store())], value=Call(func=Attribute(value=Constant(value=''), attr='join', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='__buffer', ctx=Load())], keywords=[])), If(test=Name(id='output', ctx=Load()), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='__console', ctx=Load()), attr='print', ctx=Load()), args=[Name(id='output', ctx=Load())], keywords=[]))], orelse=[]), Delete(targets=[Subscript(value=Attribute(value=Name(id='self', ctx=Load()), attr='__buffer', ctx=Load()), slice=Slice(), ctx=Del())])], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='fileno', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='__file', ctx=Load()), attr='fileno', ctx=Load()), args=[], keywords=[]))], decorator_list=[], returns=Name(id='int', ctx=Load()))], decorator_list=[])], type_ignores=[])