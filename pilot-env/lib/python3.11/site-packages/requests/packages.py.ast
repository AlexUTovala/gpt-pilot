Module(body=[Import(names=[alias(name='sys')]), Try(body=[Import(names=[alias(name='chardet')])], handlers=[ExceptHandler(type=Name(id='ImportError', ctx=Load()), body=[Import(names=[alias(name='warnings')]), Import(names=[alias(name='charset_normalizer', asname='chardet')]), Expr(value=Call(func=Attribute(value=Name(id='warnings', ctx=Load()), attr='filterwarnings', ctx=Load()), args=[Constant(value='ignore'), Constant(value='Trying to detect')], keywords=[keyword(arg='module', value=Constant(value='charset_normalizer'))]))])], orelse=[], finalbody=[]), For(target=Name(id='package', ctx=Store()), iter=Tuple(elts=[Constant(value='urllib3'), Constant(value='idna')], ctx=Load()), body=[Assign(targets=[Subscript(value=Call(func=Name(id='locals', ctx=Load()), args=[], keywords=[]), slice=Name(id='package', ctx=Load()), ctx=Store())], value=Call(func=Name(id='__import__', ctx=Load()), args=[Name(id='package', ctx=Load())], keywords=[])), For(target=Name(id='mod', ctx=Store()), iter=Call(func=Name(id='list', ctx=Load()), args=[Attribute(value=Name(id='sys', ctx=Load()), attr='modules', ctx=Load())], keywords=[]), body=[If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='mod', ctx=Load()), ops=[Eq()], comparators=[Name(id='package', ctx=Load())]), Call(func=Attribute(value=Name(id='mod', ctx=Load()), attr='startswith', ctx=Load()), args=[JoinedStr(values=[FormattedValue(value=Name(id='package', ctx=Load()), conversion=-1), Constant(value='.')])], keywords=[])]), body=[Assign(targets=[Subscript(value=Attribute(value=Name(id='sys', ctx=Load()), attr='modules', ctx=Load()), slice=JoinedStr(values=[Constant(value='requests.packages.'), FormattedValue(value=Name(id='mod', ctx=Load()), conversion=-1)]), ctx=Store())], value=Subscript(value=Attribute(value=Name(id='sys', ctx=Load()), attr='modules', ctx=Load()), slice=Name(id='mod', ctx=Load()), ctx=Load()))], orelse=[])], orelse=[])], orelse=[]), Assign(targets=[Name(id='target', ctx=Store())], value=Attribute(value=Name(id='chardet', ctx=Load()), attr='__name__', ctx=Load())), For(target=Name(id='mod', ctx=Store()), iter=Call(func=Name(id='list', ctx=Load()), args=[Attribute(value=Name(id='sys', ctx=Load()), attr='modules', ctx=Load())], keywords=[]), body=[If(test=BoolOp(op=Or(), values=[Compare(left=Name(id='mod', ctx=Load()), ops=[Eq()], comparators=[Name(id='target', ctx=Load())]), Call(func=Attribute(value=Name(id='mod', ctx=Load()), attr='startswith', ctx=Load()), args=[JoinedStr(values=[FormattedValue(value=Name(id='target', ctx=Load()), conversion=-1), Constant(value='.')])], keywords=[])]), body=[Assign(targets=[Name(id='target', ctx=Store())], value=Call(func=Attribute(value=Name(id='target', ctx=Load()), attr='replace', ctx=Load()), args=[Name(id='target', ctx=Load()), Constant(value='chardet')], keywords=[])), Assign(targets=[Subscript(value=Attribute(value=Name(id='sys', ctx=Load()), attr='modules', ctx=Load()), slice=JoinedStr(values=[Constant(value='requests.packages.'), FormattedValue(value=Name(id='target', ctx=Load()), conversion=-1)]), ctx=Store())], value=Subscript(value=Attribute(value=Name(id='sys', ctx=Load()), attr='modules', ctx=Load()), slice=Name(id='mod', ctx=Load()), ctx=Load()))], orelse=[])], orelse=[])], type_ignores=[])