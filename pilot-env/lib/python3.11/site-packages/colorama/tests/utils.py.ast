Module(body=[ImportFrom(module='contextlib', names=[alias(name='contextmanager')], level=0), ImportFrom(module='io', names=[alias(name='StringIO')], level=0), Import(names=[alias(name='sys')]), Import(names=[alias(name='os')]), ClassDef(name='StreamTTY', bases=[Name(id='StringIO', ctx=Load())], keywords=[], body=[FunctionDef(name='isatty', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Constant(value=True))], decorator_list=[])], decorator_list=[]), ClassDef(name='StreamNonTTY', bases=[Name(id='StringIO', ctx=Load())], keywords=[], body=[FunctionDef(name='isatty', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Constant(value=False))], decorator_list=[])], decorator_list=[]), FunctionDef(name='osname', args=arguments(posonlyargs=[], args=[arg(arg='name')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='orig', ctx=Store())], value=Attribute(value=Name(id='os', ctx=Load()), attr='name', ctx=Load())), Assign(targets=[Attribute(value=Name(id='os', ctx=Load()), attr='name', ctx=Store())], value=Name(id='name', ctx=Load())), Expr(value=Yield()), Assign(targets=[Attribute(value=Name(id='os', ctx=Load()), attr='name', ctx=Store())], value=Name(id='orig', ctx=Load()))], decorator_list=[Name(id='contextmanager', ctx=Load())]), FunctionDef(name='replace_by', args=arguments(posonlyargs=[], args=[arg(arg='stream')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='orig_stdout', ctx=Store())], value=Attribute(value=Name(id='sys', ctx=Load()), attr='stdout', ctx=Load())), Assign(targets=[Name(id='orig_stderr', ctx=Store())], value=Attribute(value=Name(id='sys', ctx=Load()), attr='stderr', ctx=Load())), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='stdout', ctx=Store())], value=Name(id='stream', ctx=Load())), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='stderr', ctx=Store())], value=Name(id='stream', ctx=Load())), Expr(value=Yield()), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='stdout', ctx=Store())], value=Name(id='orig_stdout', ctx=Load())), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='stderr', ctx=Store())], value=Name(id='orig_stderr', ctx=Load()))], decorator_list=[Name(id='contextmanager', ctx=Load())]), FunctionDef(name='replace_original_by', args=arguments(posonlyargs=[], args=[arg(arg='stream')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Name(id='orig_stdout', ctx=Store())], value=Attribute(value=Name(id='sys', ctx=Load()), attr='__stdout__', ctx=Load())), Assign(targets=[Name(id='orig_stderr', ctx=Store())], value=Attribute(value=Name(id='sys', ctx=Load()), attr='__stderr__', ctx=Load())), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='__stdout__', ctx=Store())], value=Name(id='stream', ctx=Load())), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='__stderr__', ctx=Store())], value=Name(id='stream', ctx=Load())), Expr(value=Yield()), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='__stdout__', ctx=Store())], value=Name(id='orig_stdout', ctx=Load())), Assign(targets=[Attribute(value=Name(id='sys', ctx=Load()), attr='__stderr__', ctx=Store())], value=Name(id='orig_stderr', ctx=Load()))], decorator_list=[Name(id='contextmanager', ctx=Load())]), FunctionDef(name='pycharm', args=arguments(posonlyargs=[], args=[], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Subscript(value=Attribute(value=Name(id='os', ctx=Load()), attr='environ', ctx=Load()), slice=Constant(value='PYCHARM_HOSTED'), ctx=Store())], value=Constant(value='1')), Assign(targets=[Name(id='non_tty', ctx=Store())], value=Call(func=Name(id='StreamNonTTY', ctx=Load()), args=[], keywords=[])), With(items=[withitem(context_expr=Call(func=Name(id='replace_by', ctx=Load()), args=[Name(id='non_tty', ctx=Load())], keywords=[])), withitem(context_expr=Call(func=Name(id='replace_original_by', ctx=Load()), args=[Name(id='non_tty', ctx=Load())], keywords=[]))], body=[Expr(value=Yield())]), Delete(targets=[Subscript(value=Attribute(value=Name(id='os', ctx=Load()), attr='environ', ctx=Load()), slice=Constant(value='PYCHARM_HOSTED'), ctx=Del())])], decorator_list=[Name(id='contextmanager', ctx=Load())])], type_ignores=[])