Module(body=[Expr(value=Constant(value='\nTracing utils\n')), ImportFrom(module='__future__', names=[alias(name='annotations')], level=0), ImportFrom(module='typing', names=[alias(name='Any')], level=0), ImportFrom(module='typing', names=[alias(name='Callable')], level=0), ImportFrom(module='typing', names=[alias(name='Sequence')], level=0), ImportFrom(module='typing', names=[alias(name='Tuple')], level=0), Assign(targets=[Name(id='_Writer', ctx=Store())], value=Subscript(value=Name(id='Callable', ctx=Load()), slice=Tuple(elts=[List(elts=[Name(id='str', ctx=Load())], ctx=Load()), Name(id='object', ctx=Load())], ctx=Load()), ctx=Load())), Assign(targets=[Name(id='_Processor', ctx=Store())], value=Subscript(value=Name(id='Callable', ctx=Load()), slice=Tuple(elts=[List(elts=[Subscript(value=Name(id='Tuple', ctx=Load()), slice=Tuple(elts=[Name(id='str', ctx=Load()), Constant(value=Ellipsis)], ctx=Load()), ctx=Load()), Subscript(value=Name(id='Tuple', ctx=Load()), slice=Tuple(elts=[Name(id='Any', ctx=Load()), Constant(value=Ellipsis)], ctx=Load()), ctx=Load())], ctx=Load()), Name(id='object', ctx=Load())], ctx=Load()), ctx=Load())), ClassDef(name='TagTracer', bases=[], keywords=[], body=[FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self')], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[AnnAssign(target=Attribute(value=Name(id='self', ctx=Load()), attr='_tags2proc', ctx=Store()), annotation=Subscript(value=Name(id='dict', ctx=Load()), slice=Tuple(elts=[Subscript(value=Name(id='tuple', ctx=Load()), slice=Tuple(elts=[Name(id='str', ctx=Load()), Constant(value=Ellipsis)], ctx=Load()), ctx=Load()), Name(id='_Processor', ctx=Load())], ctx=Load()), ctx=Load()), value=Dict(keys=[], values=[]), simple=0), AnnAssign(target=Attribute(value=Name(id='self', ctx=Load()), attr='_writer', ctx=Store()), annotation=BinOp(left=Name(id='_Writer', ctx=Load()), op=BitOr(), right=Constant(value=None)), value=Constant(value=None), simple=0), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='indent', ctx=Store())], value=Constant(value=0))], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='get', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='name', annotation=Name(id='str', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Call(func=Name(id='TagTracerSub', ctx=Load()), args=[Name(id='self', ctx=Load()), Tuple(elts=[Name(id='name', ctx=Load())], ctx=Load())], keywords=[]))], decorator_list=[], returns=Name(id='TagTracerSub', ctx=Load())), FunctionDef(name='_format_message', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='tags', annotation=Subscript(value=Name(id='Sequence', ctx=Load()), slice=Name(id='str', ctx=Load()), ctx=Load())), arg(arg='args', annotation=Subscript(value=Name(id='Sequence', ctx=Load()), slice=Name(id='object', ctx=Load()), ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=Call(func=Name(id='isinstance', ctx=Load()), args=[Subscript(value=Name(id='args', ctx=Load()), slice=UnaryOp(op=USub(), operand=Constant(value=1)), ctx=Load()), Name(id='dict', ctx=Load())], keywords=[]), body=[Assign(targets=[Name(id='extra', ctx=Store())], value=Subscript(value=Name(id='args', ctx=Load()), slice=UnaryOp(op=USub(), operand=Constant(value=1)), ctx=Load())), Assign(targets=[Name(id='args', ctx=Store())], value=Subscript(value=Name(id='args', ctx=Load()), slice=Slice(upper=UnaryOp(op=USub(), operand=Constant(value=1))), ctx=Load()))], orelse=[Assign(targets=[Name(id='extra', ctx=Store())], value=Dict(keys=[], values=[]))]), Assign(targets=[Name(id='content', ctx=Store())], value=Call(func=Attribute(value=Constant(value=' '), attr='join', ctx=Load()), args=[Call(func=Name(id='map', ctx=Load()), args=[Name(id='str', ctx=Load()), Name(id='args', ctx=Load())], keywords=[])], keywords=[])), Assign(targets=[Name(id='indent', ctx=Store())], value=BinOp(left=Constant(value='  '), op=Mult(), right=Attribute(value=Name(id='self', ctx=Load()), attr='indent', ctx=Load()))), Assign(targets=[Name(id='lines', ctx=Store())], value=List(elts=[Call(func=Attribute(value=Constant(value='{}{} [{}]\n'), attr='format', ctx=Load()), args=[Name(id='indent', ctx=Load()), Name(id='content', ctx=Load()), Call(func=Attribute(value=Constant(value=':'), attr='join', ctx=Load()), args=[Name(id='tags', ctx=Load())], keywords=[])], keywords=[])], ctx=Load())), For(target=Tuple(elts=[Name(id='name', ctx=Store()), Name(id='value', ctx=Store())], ctx=Store()), iter=Call(func=Attribute(value=Name(id='extra', ctx=Load()), attr='items', ctx=Load()), args=[], keywords=[]), body=[Expr(value=Call(func=Attribute(value=Name(id='lines', ctx=Load()), attr='append', ctx=Load()), args=[JoinedStr(values=[FormattedValue(value=Name(id='indent', ctx=Load()), conversion=-1), Constant(value='    '), FormattedValue(value=Name(id='name', ctx=Load()), conversion=-1), Constant(value=': '), FormattedValue(value=Name(id='value', ctx=Load()), conversion=-1), Constant(value='\n')])], keywords=[]))], orelse=[]), Return(value=Call(func=Attribute(value=Constant(value=''), attr='join', ctx=Load()), args=[Name(id='lines', ctx=Load())], keywords=[]))], decorator_list=[], returns=Name(id='str', ctx=Load())), FunctionDef(name='_processmessage', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='tags', annotation=Subscript(value=Name(id='tuple', ctx=Load()), slice=Tuple(elts=[Name(id='str', ctx=Load()), Constant(value=Ellipsis)], ctx=Load()), ctx=Load())), arg(arg='args', annotation=Subscript(value=Name(id='tuple', ctx=Load()), slice=Tuple(elts=[Name(id='object', ctx=Load()), Constant(value=Ellipsis)], ctx=Load()), ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=BoolOp(op=And(), values=[Compare(left=Attribute(value=Name(id='self', ctx=Load()), attr='_writer', ctx=Load()), ops=[IsNot()], comparators=[Constant(value=None)]), Name(id='args', ctx=Load())]), body=[Expr(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='_writer', ctx=Load()), args=[Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='_format_message', ctx=Load()), args=[Name(id='tags', ctx=Load()), Name(id='args', ctx=Load())], keywords=[])], keywords=[]))], orelse=[]), Try(body=[Assign(targets=[Name(id='processor', ctx=Store())], value=Subscript(value=Attribute(value=Name(id='self', ctx=Load()), attr='_tags2proc', ctx=Load()), slice=Name(id='tags', ctx=Load()), ctx=Load()))], handlers=[ExceptHandler(type=Name(id='KeyError', ctx=Load()), body=[Pass()])], orelse=[Expr(value=Call(func=Name(id='processor', ctx=Load()), args=[Name(id='tags', ctx=Load()), Name(id='args', ctx=Load())], keywords=[]))], finalbody=[])], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='setwriter', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='writer', annotation=BinOp(left=Name(id='_Writer', ctx=Load()), op=BitOr(), right=Constant(value=None)))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='_writer', ctx=Store())], value=Name(id='writer', ctx=Load()))], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='setprocessor', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='tags', annotation=BinOp(left=Name(id='str', ctx=Load()), op=BitOr(), right=Subscript(value=Name(id='tuple', ctx=Load()), slice=Tuple(elts=[Name(id='str', ctx=Load()), Constant(value=Ellipsis)], ctx=Load()), ctx=Load()))), arg(arg='processor', annotation=Name(id='_Processor', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[If(test=Call(func=Name(id='isinstance', ctx=Load()), args=[Name(id='tags', ctx=Load()), Name(id='str', ctx=Load())], keywords=[]), body=[Assign(targets=[Name(id='tags', ctx=Store())], value=Call(func=Name(id='tuple', ctx=Load()), args=[Call(func=Attribute(value=Name(id='tags', ctx=Load()), attr='split', ctx=Load()), args=[Constant(value=':')], keywords=[])], keywords=[]))], orelse=[Assert(test=Call(func=Name(id='isinstance', ctx=Load()), args=[Name(id='tags', ctx=Load()), Name(id='tuple', ctx=Load())], keywords=[]))]), Assign(targets=[Subscript(value=Attribute(value=Name(id='self', ctx=Load()), attr='_tags2proc', ctx=Load()), slice=Name(id='tags', ctx=Load()), ctx=Store())], value=Name(id='processor', ctx=Load()))], decorator_list=[], returns=Constant(value=None))], decorator_list=[]), ClassDef(name='TagTracerSub', bases=[], keywords=[], body=[FunctionDef(name='__init__', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='root', annotation=Name(id='TagTracer', ctx=Load())), arg(arg='tags', annotation=Subscript(value=Name(id='tuple', ctx=Load()), slice=Tuple(elts=[Name(id='str', ctx=Load()), Constant(value=Ellipsis)], ctx=Load()), ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='root', ctx=Store())], value=Name(id='root', ctx=Load())), Assign(targets=[Attribute(value=Name(id='self', ctx=Load()), attr='tags', ctx=Store())], value=Name(id='tags', ctx=Load()))], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='__call__', args=arguments(posonlyargs=[], args=[arg(arg='self')], vararg=arg(arg='args', annotation=Name(id='object', ctx=Load())), kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Expr(value=Call(func=Attribute(value=Attribute(value=Name(id='self', ctx=Load()), attr='root', ctx=Load()), attr='_processmessage', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='tags', ctx=Load()), Name(id='args', ctx=Load())], keywords=[]))], decorator_list=[], returns=Constant(value=None)), FunctionDef(name='get', args=arguments(posonlyargs=[], args=[arg(arg='self'), arg(arg='name', annotation=Name(id='str', ctx=Load()))], kwonlyargs=[], kw_defaults=[], defaults=[]), body=[Return(value=Call(func=Attribute(value=Name(id='self', ctx=Load()), attr='__class__', ctx=Load()), args=[Attribute(value=Name(id='self', ctx=Load()), attr='root', ctx=Load()), BinOp(left=Attribute(value=Name(id='self', ctx=Load()), attr='tags', ctx=Load()), op=Add(), right=Tuple(elts=[Name(id='name', ctx=Load())], ctx=Load()))], keywords=[]))], decorator_list=[], returns=Name(id='TagTracerSub', ctx=Load()))], decorator_list=[])], type_ignores=[])